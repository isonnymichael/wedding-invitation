<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Anggun & Sonny</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body style="margin:0">

        <section id="first" style="background-color: slategrey">
            <div class="content">
                <div class="container-btn-start">
                    <button class="btn-start blink" onclick="start()">Buka Undangan</button>
                </div>
            </div>
        </section>

        <section>
            <div id="splide">
                <div class="splide__track">
                    <ul class="splide__list">
                        <li class="splide__slide" style="background-color: slategrey;">
                             
                        </li>

                        <li id="second" class="splide__slide" style="background-color: green;opacity: 0.3;">
                            
                            <h3 class="name">
                                <span class="text-wrapper">
                                  <span class="line line1"></span>
                                  <span class="letters letters-left">Anggun</span>
                                  <span class="letters ampersand">&amp;</span>
                                  <span class="letters letters-right">Sonny</span>
                                  <span class="line line2"></span>
                                </span>
                            </h3>

                            <div class="garis"></i></div>
                        
                        </li>
                        <li class="splide__slide" style="background-color: blueviolet;">

                            <div class="garis"></div>

                        </li>
                    </ul>
                </div>
            </div>
        </section>
        
    </body>
</html>

<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>

<script>
    var splide = null;
    var trigered = false;

    var splideComponent = document.getElementById("splide");
    splideComponent.style.display = "none";
    
    var firstAimation = anime({
        targets: '#first',
        opacity: [1,0.0],
        translateY: 140,
        easing: "easeInOutExpo",
        duration: 1000,
        autoplay: false,
        update: function(anim) {

            if(Math.round(anim.progress) >= 70){
                if (trigered) return;

                trigered = true;

                var first = document.getElementById("first");
                first.remove();

                splideComponent.style.display = "initial";

                anime({
                    targets: '#second',
                    opacity: [0.3, 1.0],
                    duration: 300,
                    easing: 'easeInOutCirc',
                });

                splide = new Splide( '#splide', {
                    direction: 'ttb',
                    start: 1,
                    arrows: false,
                    height   : '100vh', 
                    pagination: true,
                    drag: true,
                } );

                splide.on( 'mounted', function () {
                    
                } );

                splide.mount();
                animationName.play();
            }
        }
    });

    var animationName = anime.timeline({loop: false, autoplay:false})
        .add({
            targets: '.name .line',
            opacity: [0.5,1],
            scaleX: [0, 1],
            easing: "easeInOutExpo",
            delay: 500,
            duration: 700
        }).add({
            targets: '.name .line',
            duration: 600,
            easing: "easeOutExpo",
            translateY: (el, i) => (-0.625 + 0.625*2*i) + "em"
        }).add({
            targets: '.name .ampersand',
            opacity: [0,1],
            scaleY: [0.5, 1],
            easing: "easeOutExpo",
            duration: 600,
            offset: '-=600'
        }).add({
            targets: '.name .letters-left',
            opacity: [0,1],
            translateX: ["0.5em", 0],
            easing: "easeOutExpo",
            duration: 600,
            offset: '-=300'
        }).add({
            targets: '.name .letters-right',
            opacity: [0,1],
            translateX: ["-0.5em", 0],
            easing: "easeOutExpo",
            duration: 600,
            offset: '-=600'
    });

    start = function(){
        firstAimation.play();

        var audio = new Audio('musics/wedding-bell.mp3');
        audio.play()
        audio.loop = true;
    }
</script>